option(GOOPAXLIB_DEBUG "GOOPAXLIB_DEBUG" OFF)

if (APPLE)
  add_library(goopax_draw window_sdl.cpp window.cpp window_sdl.h window.h window_metal.h window_metal.mm)
elseif (WIN32)
  add_library(goopax_draw STATIC window_sdl.cpp window.cpp window_sdl.h window.h)
else()
  add_library(goopax_draw window_sdl.cpp window.cpp window_sdl.h window.h)
endif()

target_include_directories(goopax_draw SYSTEM PRIVATE "ext/glatter/include")
target_link_libraries(goopax_draw PUBLIC SDL3::SDL3)
if (NOT APPLE)
  if (NOT WIN32)
    target_link_libraries(goopax_draw PUBLIC -lX11)
  endif()
  target_link_libraries(goopax_draw PUBLIC OpenGL::GLU)
endif()
target_link_libraries(goopax_draw PUBLIC goopax::goopax Eigen3::Eigen)

if (GOOPAXLIB_DEBUG)
  target_compile_definitions(goopax_draw PUBLIC -DGOOPAXLIB_DEBUG=1)
else()
  target_compile_definitions(goopax_draw PUBLIC -DGOOPAXLIB_DEBUG=0)
endif()
